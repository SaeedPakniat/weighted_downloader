# Weighted Downloader Report Template

This file documents how to reproduce the required weighted scheduling evidence.
Fill in the placeholders after you run the tests.

## Environment

- OS: [fill]
- Kernel: [fill]
- CPU: [fill]
- RAM: [fill]
- libcurl version: [fill]
- gcc version: [fill]

## Test Artifact Locations

- Downloaded file(s): x-system_02_download_10_1.jpg, x-system_02_download_10_5_1.jpg
- CSV logs (weights_log_*.csv): weights_log_3054820.csv, weights_log_3384306.csv
- Plots generated by analyze_weights.py: (script prints summary; no plots)

## Test 1: Weight ratio 10:1

Command:
./weighted_downloader --no-ui https://cdn.hasselblad.com/f/77891/11656x8742/0b7db9801e/x-system_02_download.jpg x-system_02_download_10_1.jpg

Interactive inputs:
- Partitions (P): 2
- Weights: 10 1
- Threads (T): 4

Expected outcome:
- Higher weight partition completes earlier.
- Throughput ratio trends toward ~10:1 over time.

Run output:
CSV log written: weights_log_3054820.csv
Summary: total_time=267.613s avg_throughput=0.402 MiB/s bytes=112676898
High-weight partition completion times (weight=10):
  partition 0: 267280 ms

analyze_weights.py output:
File: weights_log_3054820.csv
Partitions: 2
Total bytes (sum of partition totals): 112568337

Final bytes / share / ratio(vs smallest):
  part  0:     56338449  share=50.048%  ratio=   1.002
  part  1:     56229888  share=49.952%  ratio=   1.000

Approx avg rate (first half) bytes/sec:
  part  0:   218932.8 B/s
  part  1:   218932.8 B/s

If ratios are not close to weights, use a larger file or fewer threads (to reduce noise).

CSV log:
weights_log_3054820.csv

Plot output:
[paste plot filename(s) here]

Notes:
Observed share ~1:1, not 10:1, even with T=1. See analyze output above.

## Test 2: Weight ratio 10:5:1

Command:
./weighted_downloader --no-ui https://cdn.hasselblad.com/f/77891/11656x8742/0b7db9801e/x-system_02_download.jpg x-system_02_download_10_5_1.jpg

Interactive inputs:
- Partitions (P): 3
- Weights: 10 5 1
- Threads (T): 1

Expected outcome:
- Completion times and throughput trend roughly proportional to weights.

Run output:
CSV log written: weights_log_3384306.csv
Summary: total_time=253.611s avg_throughput=0.424 MiB/s bytes=112676898
High-weight partition completion times (weight=10):
  partition 0: 252926 ms

analyze_weights.py output:
File: weights_log_3384306.csv
Partitions: 3
Total bytes (sum of partition totals): 112604524

Final bytes / share / ratio(vs smallest):
  part  0:     37558966  share=33.355%  ratio=   1.002
  part  1:     37558966  share=33.355%  ratio=   1.002
  part  2:     37486592  share=33.290%  ratio=   1.000

Approx avg rate (first half) bytes/sec:
  part  0:   147934.5 B/s
  part  1:   146900.0 B/s
  part  2:   146900.0 B/s

If ratios are not close to weights, use a larger file or fewer threads (to reduce noise).

CSV log:
weights_log_3384306.csv

Plot output:
[paste plot filename(s) here]

Notes:
Observed share ~1:1:1, not 10:5:1, even with T=1. See analyze output above.

## analyze_weights.py usage

The CSV log is written by the downloader. Example:
python3 analyze_weights.py weights_log_<timestamp>.csv

Paste the script output here:
See outputs in Test 1 and Test 2 sections.

## Observed Performance Summary

- Total time: [fill]
- Average throughput: [fill]
- High-weight partition completion times: [fill]

## Correctness Verification

- sha256sum output:
[paste here]
